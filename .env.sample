# Resume Worker Environment Configuration

# RabbitMQ Configuration
RABBITMQ_HOST=woragis-jobs-rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_USER=woragis
RABBITMQ_PASSWORD=woragis
RABBITMQ_VHOST=/

# Queue Configuration
RABBITMQ_QUEUE_NAME=resumes.queue
RABBITMQ_EXCHANGE=woragis.tasks
RABBITMQ_ROUTING_KEY=resumes.generate
RABBITMQ_PREFETCH_COUNT=5
# Dead Letter Queue
RABBITMQ_DLQ_NAME=resumes.dlq
RABBITMQ_DLQ_EXCHANGE=woragis.dlq

# Database Configuration (REQUIRED)
# Jobs Database - stores generated resumes
DATABASE_URL=postgresql://woragis:password@woragis-jobs-database:5432/jobs_service?sslmode=disable
DATABASE_POOL_SIZE=20
DATABASE_SSL=false

# Posts Database - retrieves technical writings, posts, system designs (REQUIRED)
DATABASE_URL_POSTS=postgresql://woragis:password@woragis-posts-database:5432/posts_service?sslmode=disable
DATABASE_POSTS_POOL_SIZE=10
DATABASE_POSTS_SSL=false

# Management Database - retrieves projects, experiences (REQUIRED)
DATABASE_URL_MANAGEMENT=postgresql://woragis:password@woragis-management-database:5432/management_service?sslmode=disable
DATABASE_MANAGEMENT_POOL_SIZE=10
DATABASE_MANAGEMENT_SSL=false

# Database Connection Timeout (milliseconds)
DATABASE_TIMEOUT=10000

# Services
RESUME_SERVICE_URL=http://woragis-resume-service:8080
RESUME_SERVICE_TIMEOUT=300000
RESUME_SERVICE_API_KEY=

AI_SERVICE_URL=http://woragis-ai-service:8000
AI_SERVICE_TIMEOUT=60000
AI_SERVICE_API_KEY=
AI_PARSE_ENDPOINT=/api/v1/parse_resume

# Application
NODE_ENV=production
LOG_LEVEL=info
WORKER_CONCURRENCY=5

# Storage
STORAGE_PATH=/app/storage/resumes

# Retry Configuration
RETRY_MAX_ATTEMPTS=3
RETRY_INITIAL_DELAY=1000
RETRY_MAX_DELAY=30000
RETRY_BACKOFF_MULTIPLIER=2

# Circuit Breaker
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RESET_TIMEOUT=60000

# Observability
METRICS_ENABLED=true
METRICS_PORT=9090

# Tracing (Jaeger)
JAEGER_ENABLED=true
JAEGER_SERVICE_NAME=resume-worker
JAEGER_AGENT_HOST=woragis-jaeger
JAEGER_AGENT_PORT=6831
